bea27b9da634ca34daf3e185adcab3b6
'use strict';var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var ColorPropType=require('ColorPropType');var EdgeInsetsPropType=require('EdgeInsetsPropType');var NativeMethodsMixin=require('NativeMethodsMixin');var Platform=require('Platform');var React=require('React');var PropTypes=require('prop-types');var ReactNativeViewAttributes=require('ReactNativeViewAttributes');var StyleSheetPropType=require('StyleSheetPropType');var TextStylePropTypes=require('TextStylePropTypes');var Touchable=require('Touchable');var createReactClass=require('create-react-class');var createReactNativeComponentClass=require('createReactNativeComponentClass');var mergeFast=require('mergeFast');var processColor=require('processColor');var stylePropType=StyleSheetPropType(TextStylePropTypes);var viewConfig={validAttributes:mergeFast(ReactNativeViewAttributes.UIView,{isHighlighted:true,numberOfLines:true,ellipsizeMode:true,allowFontScaling:true,disabled:true,selectable:true,selectionColor:true,adjustsFontSizeToFit:true,minimumFontScale:true,textBreakStrategy:true}),uiViewClassName:'RCTText'};var Text=createReactClass({displayName:'Text',propTypes:{ellipsizeMode:PropTypes.oneOf(['head','middle','tail','clip']),numberOfLines:PropTypes.number,textBreakStrategy:PropTypes.oneOf(['simple','highQuality','balanced']),onLayout:PropTypes.func,onPress:PropTypes.func,onLongPress:PropTypes.func,pressRetentionOffset:EdgeInsetsPropType,selectable:PropTypes.bool,selectionColor:ColorPropType,suppressHighlighting:PropTypes.bool,style:stylePropType,testID:PropTypes.string,nativeID:PropTypes.string,allowFontScaling:PropTypes.bool,accessible:PropTypes.bool,adjustsFontSizeToFit:PropTypes.bool,minimumFontScale:PropTypes.number,disabled:PropTypes.bool},getDefaultProps:function getDefaultProps(){return{accessible:true,allowFontScaling:true,ellipsizeMode:'tail'};},getInitialState:function getInitialState(){return mergeFast(Touchable.Mixin.touchableGetInitialState(),{isHighlighted:false});},mixins:[NativeMethodsMixin],viewConfig:viewConfig,getChildContext:function getChildContext(){return{isInAParentText:true};},childContextTypes:{isInAParentText:PropTypes.bool},contextTypes:{isInAParentText:PropTypes.bool},_handlers:null,_hasPressHandler:function _hasPressHandler(){return!!this.props.onPress||!!this.props.onLongPress;},touchableHandleActivePressIn:null,touchableHandleActivePressOut:null,touchableHandlePress:null,touchableHandleLongPress:null,touchableGetPressRectOffset:null,render:function render(){var _this=this;var newProps=this.props;if(this.props.onStartShouldSetResponder||this._hasPressHandler()){if(!this._handlers){this._handlers={onStartShouldSetResponder:function onStartShouldSetResponder(){var shouldSetFromProps=_this.props.onStartShouldSetResponder&&_this.props.onStartShouldSetResponder();var setResponder=shouldSetFromProps||_this._hasPressHandler();if(setResponder&&!_this.touchableHandleActivePressIn){for(var key in Touchable.Mixin){if(typeof Touchable.Mixin[key]==='function'){_this[key]=Touchable.Mixin[key].bind(_this);}}_this.touchableHandleActivePressIn=function(){if(_this.props.suppressHighlighting||!_this._hasPressHandler()){return;}_this.setState({isHighlighted:true});};_this.touchableHandleActivePressOut=function(){if(_this.props.suppressHighlighting||!_this._hasPressHandler()){return;}_this.setState({isHighlighted:false});};_this.touchableHandlePress=function(e){_this.props.onPress&&_this.props.onPress(e);};_this.touchableHandleLongPress=function(e){_this.props.onLongPress&&_this.props.onLongPress(e);};_this.touchableGetPressRectOffset=function(){return this.props.pressRetentionOffset||PRESS_RECT_OFFSET;};}return setResponder;},onResponderGrant:function(e,dispatchID){this.touchableHandleResponderGrant(e,dispatchID);this.props.onResponderGrant&&this.props.onResponderGrant.apply(this,arguments);}.bind(this),onResponderMove:function(e){this.touchableHandleResponderMove(e);this.props.onResponderMove&&this.props.onResponderMove.apply(this,arguments);}.bind(this),onResponderRelease:function(e){this.touchableHandleResponderRelease(e);this.props.onResponderRelease&&this.props.onResponderRelease.apply(this,arguments);}.bind(this),onResponderTerminate:function(e){this.touchableHandleResponderTerminate(e);this.props.onResponderTerminate&&this.props.onResponderTerminate.apply(this,arguments);}.bind(this),onResponderTerminationRequest:function(){var allowTermination=this.touchableHandleResponderTerminationRequest();if(allowTermination&&this.props.onResponderTerminationRequest){allowTermination=this.props.onResponderTerminationRequest.apply(this,arguments);}return allowTermination;}.bind(this)};}newProps=_extends({},this.props,this._handlers,{isHighlighted:this.state.isHighlighted});}if(newProps.selectionColor!=null){newProps=_extends({},newProps,{selectionColor:processColor(newProps.selectionColor)});}if(Touchable.TOUCH_TARGET_DEBUG&&newProps.onPress){newProps=_extends({},newProps,{style:[this.props.style,{color:'magenta'}]});}if(this.context.isInAParentText){return React.createElement(RCTVirtualText,newProps);}else{return React.createElement(RCTText,newProps);}}});var PRESS_RECT_OFFSET={top:20,left:20,right:20,bottom:30};var RCTText=createReactNativeComponentClass(viewConfig.uiViewClassName,function(){return viewConfig;});var RCTVirtualText=RCTText;if(Platform.OS==='android'){RCTVirtualText=createReactNativeComponentClass('RCTVirtualText',function(){return{validAttributes:mergeFast(ReactNativeViewAttributes.UIView,{isHighlighted:true}),uiViewClassName:'RCTVirtualText'};});}module.exports=Text;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRleHQuanMiXSwibmFtZXMiOlsiQ29sb3JQcm9wVHlwZSIsInJlcXVpcmUiLCJFZGdlSW5zZXRzUHJvcFR5cGUiLCJOYXRpdmVNZXRob2RzTWl4aW4iLCJQbGF0Zm9ybSIsIlJlYWN0IiwiUHJvcFR5cGVzIiwiUmVhY3ROYXRpdmVWaWV3QXR0cmlidXRlcyIsIlN0eWxlU2hlZXRQcm9wVHlwZSIsIlRleHRTdHlsZVByb3BUeXBlcyIsIlRvdWNoYWJsZSIsImNyZWF0ZVJlYWN0Q2xhc3MiLCJjcmVhdGVSZWFjdE5hdGl2ZUNvbXBvbmVudENsYXNzIiwibWVyZ2VGYXN0IiwicHJvY2Vzc0NvbG9yIiwic3R5bGVQcm9wVHlwZSIsInZpZXdDb25maWciLCJ2YWxpZEF0dHJpYnV0ZXMiLCJVSVZpZXciLCJpc0hpZ2hsaWdodGVkIiwibnVtYmVyT2ZMaW5lcyIsImVsbGlwc2l6ZU1vZGUiLCJhbGxvd0ZvbnRTY2FsaW5nIiwiZGlzYWJsZWQiLCJzZWxlY3RhYmxlIiwic2VsZWN0aW9uQ29sb3IiLCJhZGp1c3RzRm9udFNpemVUb0ZpdCIsIm1pbmltdW1Gb250U2NhbGUiLCJ0ZXh0QnJlYWtTdHJhdGVneSIsInVpVmlld0NsYXNzTmFtZSIsIlRleHQiLCJkaXNwbGF5TmFtZSIsInByb3BUeXBlcyIsIm9uZU9mIiwibnVtYmVyIiwib25MYXlvdXQiLCJmdW5jIiwib25QcmVzcyIsIm9uTG9uZ1ByZXNzIiwicHJlc3NSZXRlbnRpb25PZmZzZXQiLCJib29sIiwic3VwcHJlc3NIaWdobGlnaHRpbmciLCJzdHlsZSIsInRlc3RJRCIsInN0cmluZyIsIm5hdGl2ZUlEIiwiYWNjZXNzaWJsZSIsImdldERlZmF1bHRQcm9wcyIsImdldEluaXRpYWxTdGF0ZSIsIk1peGluIiwidG91Y2hhYmxlR2V0SW5pdGlhbFN0YXRlIiwibWl4aW5zIiwiZ2V0Q2hpbGRDb250ZXh0IiwiaXNJbkFQYXJlbnRUZXh0IiwiY2hpbGRDb250ZXh0VHlwZXMiLCJjb250ZXh0VHlwZXMiLCJfaGFuZGxlcnMiLCJfaGFzUHJlc3NIYW5kbGVyIiwicHJvcHMiLCJ0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luIiwidG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQiLCJ0b3VjaGFibGVIYW5kbGVQcmVzcyIsInRvdWNoYWJsZUhhbmRsZUxvbmdQcmVzcyIsInRvdWNoYWJsZUdldFByZXNzUmVjdE9mZnNldCIsInJlbmRlciIsIm5ld1Byb3BzIiwib25TdGFydFNob3VsZFNldFJlc3BvbmRlciIsInNob3VsZFNldEZyb21Qcm9wcyIsInNldFJlc3BvbmRlciIsImtleSIsImJpbmQiLCJzZXRTdGF0ZSIsImUiLCJQUkVTU19SRUNUX09GRlNFVCIsIm9uUmVzcG9uZGVyR3JhbnQiLCJkaXNwYXRjaElEIiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyR3JhbnQiLCJhcHBseSIsImFyZ3VtZW50cyIsIm9uUmVzcG9uZGVyTW92ZSIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlck1vdmUiLCJvblJlc3BvbmRlclJlbGVhc2UiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJSZWxlYXNlIiwib25SZXNwb25kZXJUZXJtaW5hdGUiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGUiLCJvblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdCIsImFsbG93VGVybWluYXRpb24iLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3QiLCJzdGF0ZSIsIlRPVUNIX1RBUkdFVF9ERUJVRyIsImNvbG9yIiwiY29udGV4dCIsInRvcCIsImxlZnQiLCJyaWdodCIsImJvdHRvbSIsIlJDVFRleHQiLCJSQ1RWaXJ0dWFsVGV4dCIsIk9TIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBV0EsYSxnT0FFQSxHQUFNQSxlQUFnQkMsUUFBUSxlQUFSLENBQXRCLENBQ0EsR0FBTUMsb0JBQXFCRCxRQUFRLG9CQUFSLENBQTNCLENBQ0EsR0FBTUUsb0JBQXFCRixRQUFRLG9CQUFS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SThDLFNBQVN4QyxjQUFULEVBQTJCLElBQS9CLENBQXFDLENBQ25Dd0MscUJBQ0tBLFFBREwsRUFFRXhDLGVBQWdCWCxhQUFhbUQsU0FBU3hDLGNBQXRCLENBRmxCLEdBSUQsQ0FDRCxHQUFJZixVQUFVK0Usa0JBQVYsRUFBZ0N4QixTQUFTNUIsT0FBN0MsQ0FBc0QsQ0FDcEQ0QixxQkFDS0EsUUFETCxFQUVFdkIsTUFBTyxDQUFDLEtBQUtnQixLQUFMLENBQVdoQixLQUFaLENBQW1CLENBQUNnRCxNQUFPLFNBQVIsQ0FBbkIsQ0FGVCxHQUlELENBQ0QsR0FBSSxLQUFLQyxPQUFMLENBQWF0QyxlQUFqQixDQUFrQyxDQUNoQyxNQUFPLHFCQUFDLGNBQUQsQ0FBb0JZLFFBQXBCLENBQVAsQ0FDRCxDQUZELElBRU8sQ0FDTCxNQUFPLHFCQUFDLE9BQUQsQ0FBYUEsUUFBYixDQUFQLENBQ0QsQ0FDRixDQS9RMkIsQ0FBakIsQ0FBYixDQXlSQSxHQUFJUSxtQkFBb0IsQ0FBQ21CLElBQUssRUFBTixDQUFVQyxLQUFNLEVBQWhCLENBQW9CQyxNQUFPLEVBQTNCLENBQStCQyxPQUFRLEVBQXZDLENBQXhCLENBRUEsR0FBSUMsU0FBVXBGLGdDQUNaSSxXQUFXYSxlQURDLENBRVosaUJBQU1iLFdBQU4sRUFGWSxDQUFkLENBSUEsR0FBSWlGLGdCQUFpQkQsT0FBckIsQ0FFQSxHQUFJNUYsU0FBUzhGLEVBQVQsR0FBZ0IsU0FBcEIsQ0FBK0IsQ0FDN0JELGVBQWlCckYsZ0NBQWdDLGdCQUFoQyxDQUFrRCxpQkFBTyxDQUN4RUssZ0JBQWlCSixVQUFVTiwwQkFBMEJXLE1BQXBDLENBQTRDLENBQzNEQyxjQUFlLElBRDRDLENBQTVDLENBRHVELENBSXhFVSxnQkFBaUIsZ0JBSnVELENBQVAsRUFBbEQsQ0FBakIsQ0FNRCxDQUVEc0UsT0FBT0MsT0FBUCxDQUFpQnRFLElBQWpCIiwiZmlsZSI6IlRleHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFRleHRcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuY29uc3QgQ29sb3JQcm9wVHlwZSA9IHJlcXVpcmUoJ0NvbG9yUHJvcFR5cGUnKTtcbmNvbnN0IEVkZ2VJbnNldHNQcm9wVHlwZSA9IHJlcXVpcmUoJ0VkZ2VJbnNldHNQcm9wVHlwZScpO1xuY29uc3QgTmF0aXZlTWV0aG9kc01peGluID0gcmVxdWlyZSgnTmF0aXZlTWV0aG9kc01peGluJyk7XG5jb25zdCBQbGF0Zm9ybSA9IHJlcXVpcmUoJ1BsYXRmb3JtJyk7XG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoJ1JlYWN0Jyk7XG5jb25zdCBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5jb25zdCBSZWFjdE5hdGl2ZVZpZXdBdHRyaWJ1dGVzID0gcmVxdWlyZSgnUmVhY3ROYXRpdmVWaWV3QXR0cmlidXRlcycpO1xuY29uc3QgU3R5bGVTaGVldFByb3BUeXBlID0gcmVxdWlyZSgnU3R5bGVTaGVldFByb3BUeXBlJyk7XG5jb25zdCBUZXh0U3R5bGVQcm9wVHlwZXMgPSByZXF1aXJlKCdUZXh0U3R5bGVQcm9wVHlwZXMnKTtcbmNvbnN0IFRvdWNoYWJsZSA9IHJlcXVpcmUoJ1RvdWNoYWJsZScpO1xuXG5jb25zdCBjcmVhdGVSZWFjdENsYXNzID0gcmVxdWlyZSgnY3JlYXRlLXJlYWN0LWNsYXNzJyk7XG5jb25zdCBjcmVhdGVSZWFjdE5hdGl2ZUNvbXBvbmVudENsYXNzID0gcmVxdWlyZSgnY3JlYXRlUmVhY3ROYXRpdmVDb21wb25lbnRDbGFzcycpO1xuY29uc3QgbWVyZ2VGYXN0ID0gcmVxdWlyZSgnbWVyZ2VGYXN0Jyk7XG5jb25zdCBwcm9jZXNzQ29sb3IgPSByZXF1aXJlKCdwcm9jZXNzQ29sb3InKTtcblxuY29uc3Qgc3R5bGVQcm9wVHlwZSA9IFN0eWxlU2hlZXRQcm9wVHlwZShUZXh0U3R5bGVQcm9wVHlwZXMpO1xuXG5jb25zdCB2aWV3Q29uZmlnID0ge1xuICB2YWxpZEF0dHJpYnV0ZXM6IG1lcmdlRmFzdChSZWFjdE5hdGl2ZVZpZXdBdHRyaWJ1dGVzLlVJVmlldywge1xuICAgIGlzSGlnaGxpZ2h0ZWQ6IHRydWUsXG4gICAgbnVtYmVyT2ZMaW5lczogdHJ1ZSxcbiAgICBlbGxpcHNpemVNb2RlOiB0cnVlLFxuICAgIGFsbG93Rm9udFNjYWxpbmc6IHRydWUsXG4gICAgZGlzYWJsZWQ6IHRydWUsXG4gICAgc2VsZWN0YWJsZTogdHJ1ZSxcbiAgICBzZWxlY3Rpb25Db2xvcjogdHJ1ZSxcbiAgICBhZGp1c3RzRm9udFNpemVUb0ZpdDogdHJ1ZSxcbiAgICBtaW5pbXVtRm9udFNjYWxlOiB0cnVlLFxuICAgIHRleHRCcmVha1N0cmF0ZWd5OiB0cnVlLFxuICB9KSxcbiAgdWlWaWV3Q2xhc3NOYW1lOiAnUkNUVGV4dCcsXG59O1xuXG4vKipcbiAqIEEgUmVhY3QgY29tcG9uZW50IGZvciBkaXNwbGF5aW5nIHRleHQuXG4gKlxuICogYFRleHRgIHN1cHBvcnRzIG5lc3RpbmcsIHN0eWxpbmcsIGFuZCB0b3VjaCBoYW5kbGluZy5cbiAqXG4gKiBJbiB0aGUgZm9sbG93aW5nIGV4YW1wbGUsIHRoZSBuZXN0ZWQgdGl0bGUgYW5kIGJvZHkgdGV4dCB3aWxsIGluaGVyaXQgdGhlXG4gKiBgZm9udEZhbWlseWAgZnJvbSBgc3R5bGVzLmJhc2VUZXh0YCwgYnV0IHRoZSB0aXRsZSBwcm92aWRlcyBpdHMgb3duXG4gKiBhZGRpdGlvbmFsIHN0eWxlcy4gIFRoZSB0aXRsZSBhbmQgYm9keSB3aWxsc3RhY2sgb24gdG9wIG9mIGVhY2ggb3RoZXIgb25cbiAqIGFjY291bnQgb2YgdGhlIGxpdGVyYWwgbmV3bGluZXM6XG4gKlxuICogYGBgUmVhY3ROYXRpdmVXZWJQbGF5ZXJcbiAqIGltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG4gKiBpbXBvcnQgeyBBcHBSZWdpc3RyeSwgVGV4dCwgU3R5bGVTaGVldCB9IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG4gKlxuICogZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGV4dEluQU5lc3QgZXh0ZW5kcyBDb21wb25lbnQge1xuICogICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICogICAgIHN1cGVyKHByb3BzKTtcbiAqICAgICB0aGlzLnN0YXRlID0ge1xuICogICAgICAgdGl0bGVUZXh0OiBcIkJpcmQncyBOZXN0XCIsXG4gKiAgICAgICBib2R5VGV4dDogJ1RoaXMgaXMgbm90IHJlYWxseSBhIGJpcmQgbmVzdC4nXG4gKiAgICAgfTtcbiAqICAgfVxuICpcbiAqICAgcmVuZGVyKCkge1xuICogICAgIHJldHVybiAoXG4gKiAgICAgICA8VGV4dCBzdHlsZT17c3R5bGVzLmJhc2VUZXh0fT5cbiAqICAgICAgICAgPFRleHQgc3R5bGU9e3N0eWxlcy50aXRsZVRleHR9IG9uUHJlc3M9e3RoaXMub25QcmVzc1RpdGxlfT5cbiAqICAgICAgICAgICB7dGhpcy5zdGF0ZS50aXRsZVRleHR9eydcXG4nfXsnXFxuJ31cbiAqICAgICAgICAgPC9UZXh0PlxuICogICAgICAgICA8VGV4dCBudW1iZXJPZkxpbmVzPXs1fT5cbiAqICAgICAgICAgICB7dGhpcy5zdGF0ZS5ib2R5VGV4dH1cbiAqICAgICAgICAgPC9UZXh0PlxuICogICAgICAgPC9UZXh0PlxuICogICAgICk7XG4gKiAgIH1cbiAqIH1cbiAqXG4gKiBjb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gKiAgIGJhc2VUZXh0OiB7XG4gKiAgICAgZm9udEZhbWlseTogJ0NvY2hpbicsXG4gKiAgIH0sXG4gKiAgIHRpdGxlVGV4dDoge1xuICogICAgIGZvbnRTaXplOiAyMCxcbiAqICAgICBmb250V2VpZ2h0OiAnYm9sZCcsXG4gKiAgIH0sXG4gKiB9KTtcbiAqXG4gKiAvLyBza2lwIHRoaXMgbGluZSBpZiB1c2luZyBDcmVhdGUgUmVhY3QgTmF0aXZlIEFwcFxuICogQXBwUmVnaXN0cnkucmVnaXN0ZXJDb21wb25lbnQoJ1RleHRJbkFOZXN0JywgKCkgPT4gVGV4dEluQU5lc3QpO1xuICogYGBgXG4gKlxuICogIyMgTmVzdGVkIHRleHRcbiAqXG4gKiBCb3RoIGlPUyBhbmQgQW5kcm9pZCBhbGxvdyB5b3UgdG8gZGlzcGxheSBmb3JtYXR0ZWQgdGV4dCBieSBhbm5vdGF0aW5nXG4gKiByYW5nZXMgb2YgYSBzdHJpbmcgd2l0aCBzcGVjaWZpYyBmb3JtYXR0aW5nIGxpa2UgYm9sZCBvciBjb2xvcmVkIHRleHRcbiAqIChgTlNBdHRyaWJ1dGVkU3RyaW5nYCBvbiBpT1MsIGBTcGFubmFibGVTdHJpbmdgIG9uIEFuZHJvaWQpLiBJbiBwcmFjdGljZSxcbiAqIHRoaXMgaXMgdmVyeSB0ZWRpb3VzLiBGb3IgUmVhY3QgTmF0aXZlLCB3ZSBkZWNpZGVkIHRvIHVzZSB3ZWIgcGFyYWRpZ20gZm9yXG4gKiB0aGlzIHdoZXJlIHlvdSBjYW4gbmVzdCB0ZXh0IHRvIGFjaGlldmUgdGhlIHNhbWUgZWZmZWN0LlxuICpcbiAqXG4gKiBgYGBSZWFjdE5hdGl2ZVdlYlBsYXllclxuICogaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbiAqIGltcG9ydCB7IEFwcFJlZ2lzdHJ5LCBUZXh0IH0gZnJvbSAncmVhY3QtbmF0aXZlJztcbiAqXG4gKiBleHBvcnQgZGVmYXVsdCBjbGFzcyBCb2xkQW5kQmVhdXRpZnVsIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAqICAgcmVuZGVyKCkge1xuICogICAgIHJldHVybiAoXG4gKiAgICAgICA8VGV4dCBzdHlsZT17e2ZvbnRXZWlnaHQ6ICdib2xkJ319PlxuICogICAgICAgICBJIGFtIGJvbGRcbiAqICAgICAgICAgPFRleHQgc3R5bGU9e3tjb2xvcjogJ3JlZCd9fT5cbiAqICAgICAgICAgICBhbmQgcmVkXG4gKiAgICAgICAgIDwvVGV4dD5cbiAqICAgICAgIDwvVGV4dD5cbiAqICAgICApO1xuICogICB9XG4gKiB9XG4gKlxuICogLy8gc2tpcCB0aGlzIGxpbmUgaWYgdXNpbmcgQ3JlYXRlIFJlYWN0IE5hdGl2ZSBBcHBcbiAqIEFwcFJlZ2lzdHJ5LnJlZ2lzdGVyQ29tcG9uZW50KCdBd2Vzb21lUHJvamVjdCcsICgpID0+IEJvbGRBbmRCZWF1dGlmdWwpO1xuICogYGBgXG4gKlxuICogQmVoaW5kIHRoZSBzY2VuZXMsIFJlYWN0IE5hdGl2ZSBjb252ZXJ0cyB0aGlzIHRvIGEgZmxhdCBgTlNBdHRyaWJ1dGVkU3RyaW5nYFxuICogb3IgYFNwYW5uYWJsZVN0cmluZ2AgdGhhdCBjb250YWlucyB0aGUgZm9sbG93aW5nIGluZm9ybWF0aW9uOlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIFwiSSBhbSBib2xkIGFuZCByZWRcIlxuICogMC05OiBib2xkXG4gKiA5LTE3OiBib2xkLCByZWRcbiAqIGBgYFxuICpcbiAqICMjIE5lc3RlZCB2aWV3cyAoaU9TIG9ubHkpXG4gKlxuICogT24gaU9TLCB5b3UgY2FuIG5lc3Qgdmlld3Mgd2l0aGluIHlvdXIgVGV4dCBjb21wb25lbnQuIEhlcmUncyBhbiBleGFtcGxlOlxuICpcbiAqIGBgYFJlYWN0TmF0aXZlV2ViUGxheWVyXG4gKiBpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuICogaW1wb3J0IHsgQXBwUmVnaXN0cnksIFRleHQsIFZpZXcgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuICpcbiAqIGV4cG9ydCBkZWZhdWx0IGNsYXNzIEJsdWVJc0Nvb2wgZXh0ZW5kcyBDb21wb25lbnQge1xuICogICByZW5kZXIoKSB7XG4gKiAgICAgcmV0dXJuIChcbiAqICAgICAgIDxUZXh0PlxuICogICAgICAgICBUaGVyZSBpcyBhIGJsdWUgc3F1YXJlXG4gKiAgICAgICAgIDxWaWV3IHN0eWxlPXt7d2lkdGg6IDUwLCBoZWlnaHQ6IDUwLCBiYWNrZ3JvdW5kQ29sb3I6ICdzdGVlbGJsdWUnfX0gLz5cbiAqICAgICAgICAgaW4gYmV0d2VlbiBteSB0ZXh0LlxuICogICAgICAgPC9UZXh0PlxuICogICAgICk7XG4gKiAgIH1cbiAqIH1cbiAqXG4gKiAvLyBza2lwIHRoaXMgbGluZSBpZiB1c2luZyBDcmVhdGUgUmVhY3QgTmF0aXZlIEFwcFxuICogQXBwUmVnaXN0cnkucmVnaXN0ZXJDb21wb25lbnQoJ0F3ZXNvbWVQcm9qZWN0JywgKCkgPT4gQmx1ZUlzQ29vbCk7XG4gKiBgYGBcbiAqXG4gKiA+IEluIG9yZGVyIHRvIHVzZSB0aGlzIGZlYXR1cmUsIHlvdSBtdXN0IGdpdmUgdGhlIHZpZXcgYSBgd2lkdGhgIGFuZCBhIGBoZWlnaHRgLlxuICpcbiAqICMjIENvbnRhaW5lcnNcbiAqXG4gKiBUaGUgYDxUZXh0PmAgZWxlbWVudCBpcyBzcGVjaWFsIHJlbGF0aXZlIHRvIGxheW91dDogZXZlcnl0aGluZyBpbnNpZGUgaXMgbm9cbiAqIGxvbmdlciB1c2luZyB0aGUgZmxleGJveCBsYXlvdXQgYnV0IHVzaW5nIHRleHQgbGF5b3V0LiBUaGlzIG1lYW5zIHRoYXRcbiAqIGVsZW1lbnRzIGluc2lkZSBvZiBhIGA8VGV4dD5gIGFyZSBubyBsb25nZXIgcmVjdGFuZ2xlcywgYnV0IHdyYXAgd2hlbiB0aGV5XG4gKiBzZWUgdGhlIGVuZCBvZiB0aGUgbGluZS5cbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiA8VGV4dD5cbiAqICAgPFRleHQ+Rmlyc3QgcGFydCBhbmQgPC9UZXh0PlxuICogICA8VGV4dD5zZWNvbmQgcGFydDwvVGV4dD5cbiAqIDwvVGV4dD5cbiAqIC8vIFRleHQgY29udGFpbmVyOiBhbGwgdGhlIHRleHQgZmxvd3MgYXMgaWYgaXQgd2FzIG9uZVxuICogLy8gfEZpcnN0IHBhcnQgfFxuICogLy8gfGFuZCBzZWNvbmQgfFxuICogLy8gfHBhcnQgICAgICAgfFxuICpcbiAqIDxWaWV3PlxuICogICA8VGV4dD5GaXJzdCBwYXJ0IGFuZCA8L1RleHQ+XG4gKiAgIDxUZXh0PnNlY29uZCBwYXJ0PC9UZXh0PlxuICogPC9WaWV3PlxuICogLy8gVmlldyBjb250YWluZXI6IGVhY2ggdGV4dCBpcyBpdHMgb3duIGJsb2NrXG4gKiAvLyB8Rmlyc3QgcGFydCB8XG4gKiAvLyB8YW5kICAgICAgICB8XG4gKiAvLyB8c2Vjb25kIHBhcnR8XG4gKiBgYGBcbiAqXG4gKiAjIyBMaW1pdGVkIFN0eWxlIEluaGVyaXRhbmNlXG4gKlxuICogT24gdGhlIHdlYiwgdGhlIHVzdWFsIHdheSB0byBzZXQgYSBmb250IGZhbWlseSBhbmQgc2l6ZSBmb3IgdGhlIGVudGlyZVxuICogZG9jdW1lbnQgaXMgdG8gdGFrZSBhZHZhbnRhZ2Ugb2YgaW5oZXJpdGVkIENTUyBwcm9wZXJ0aWVzIGxpa2Ugc286XG4gKlxuICogYGBgY3NzXG4gKiBodG1sIHtcbiAqICAgZm9udC1mYW1pbHk6ICdsdWNpZGEgZ3JhbmRlJywgdGFob21hLCB2ZXJkYW5hLCBhcmlhbCwgc2Fucy1zZXJpZjtcbiAqICAgZm9udC1zaXplOiAxMXB4O1xuICogICBjb2xvcjogIzE0MTgyMztcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEFsbCBlbGVtZW50cyBpbiB0aGUgZG9jdW1lbnQgd2lsbCBpbmhlcml0IHRoaXMgZm9udCB1bmxlc3MgdGhleSBvciBvbmUgb2ZcbiAqIHRoZWlyIHBhcmVudHMgc3BlY2lmaWVzIGEgbmV3IHJ1bGUuXG4gKlxuICogSW4gUmVhY3QgTmF0aXZlLCB3ZSBhcmUgbW9yZSBzdHJpY3QgYWJvdXQgaXQ6ICoqeW91IG11c3Qgd3JhcCBhbGwgdGhlIHRleHRcbiAqIG5vZGVzIGluc2lkZSBvZiBhIGA8VGV4dD5gIGNvbXBvbmVudCoqLiBZb3UgY2Fubm90IGhhdmUgYSB0ZXh0IG5vZGUgZGlyZWN0bHlcbiAqIHVuZGVyIGEgYDxWaWV3PmAuXG4gKlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIC8vIEJBRDogd2lsbCByYWlzZSBleGNlcHRpb24sIGNhbid0IGhhdmUgYSB0ZXh0IG5vZGUgYXMgY2hpbGQgb2YgYSA8Vmlldz5cbiAqIDxWaWV3PlxuICogICBTb21lIHRleHRcbiAqIDwvVmlldz5cbiAqXG4gKiAvLyBHT09EXG4gKiA8Vmlldz5cbiAqICAgPFRleHQ+XG4gKiAgICAgU29tZSB0ZXh0XG4gKiAgIDwvVGV4dD5cbiAqIDwvVmlldz5cbiAqIGBgYFxuICpcbiAqIFlvdSBhbHNvIGxvc2UgdGhlIGFiaWxpdHkgdG8gc2V0IHVwIGEgZGVmYXVsdCBmb250IGZvciBhbiBlbnRpcmUgc3VidHJlZS5cbiAqIFRoZSByZWNvbW1lbmRlZCB3YXkgdG8gdXNlIGNvbnNpc3RlbnQgZm9udHMgYW5kIHNpemVzIGFjcm9zcyB5b3VyXG4gKiBhcHBsaWNhdGlvbiBpcyB0byBjcmVhdGUgYSBjb21wb25lbnQgYE15QXBwVGV4dGAgdGhhdCBpbmNsdWRlcyB0aGVtIGFuZCB1c2VcbiAqIHRoaXMgY29tcG9uZW50IGFjcm9zcyB5b3VyIGFwcC4gWW91IGNhbiBhbHNvIHVzZSB0aGlzIGNvbXBvbmVudCB0byBtYWtlIG1vcmVcbiAqIHNwZWNpZmljIGNvbXBvbmVudHMgbGlrZSBgTXlBcHBIZWFkZXJUZXh0YCBmb3Igb3RoZXIga2luZHMgb2YgdGV4dC5cbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiA8Vmlldz5cbiAqICAgPE15QXBwVGV4dD5UZXh0IHN0eWxlZCB3aXRoIHRoZSBkZWZhdWx0IGZvbnQgZm9yIHRoZSBlbnRpcmUgYXBwbGljYXRpb248L015QXBwVGV4dD5cbiAqICAgPE15QXBwSGVhZGVyVGV4dD5UZXh0IHN0eWxlZCBhcyBhIGhlYWRlcjwvTXlBcHBIZWFkZXJUZXh0PlxuICogPC9WaWV3PlxuICogYGBgXG4gKlxuICogQXNzdW1pbmcgdGhhdCBgTXlBcHBUZXh0YCBpcyBhIGNvbXBvbmVudCB0aGF0IHNpbXBseSByZW5kZXJzIG91dCBpdHNcbiAqIGNoaWxkcmVuIGludG8gYSBgVGV4dGAgY29tcG9uZW50IHdpdGggc3R5bGluZywgdGhlbiBgTXlBcHBIZWFkZXJUZXh0YCBjYW4gYmVcbiAqIGRlZmluZWQgYXMgZm9sbG93czpcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBjbGFzcyBNeUFwcEhlYWRlclRleHQgZXh0ZW5kcyBDb21wb25lbnQge1xuICogICByZW5kZXIoKSB7XG4gKiAgICAgPE15QXBwVGV4dD5cbiAqICAgICAgIDxUZXh0IHN0eWxlPXt7Zm9udFNpemU6IDIwfX0+XG4gKiAgICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxuICogICAgICAgPC9UZXh0PlxuICogICAgIDwvTXlBcHBUZXh0PlxuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBDb21wb3NpbmcgYE15QXBwVGV4dGAgaW4gdGhpcyB3YXkgZW5zdXJlcyB0aGF0IHdlIGdldCB0aGUgc3R5bGVzIGZyb20gYVxuICogdG9wLWxldmVsIGNvbXBvbmVudCwgYnV0IGxlYXZlcyB1cyB0aGUgYWJpbGl0eSB0byBhZGQgLyBvdmVycmlkZSB0aGVtIGluXG4gKiBzcGVjaWZpYyB1c2UgY2FzZXMuXG4gKlxuICogUmVhY3QgTmF0aXZlIHN0aWxsIGhhcyB0aGUgY29uY2VwdCBvZiBzdHlsZSBpbmhlcml0YW5jZSwgYnV0IGxpbWl0ZWQgdG8gdGV4dFxuICogc3VidHJlZXMuIEluIHRoaXMgY2FzZSwgdGhlIHNlY29uZCBwYXJ0IHdpbGwgYmUgYm90aCBib2xkIGFuZCByZWQuXG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogPFRleHQgc3R5bGU9e3tmb250V2VpZ2h0OiAnYm9sZCd9fT5cbiAqICAgSSBhbSBib2xkXG4gKiAgIDxUZXh0IHN0eWxlPXt7Y29sb3I6ICdyZWQnfX0+XG4gKiAgICAgYW5kIHJlZFxuICogICA8L1RleHQ+XG4gKiA8L1RleHQ+XG4gKiBgYGBcbiAqXG4gKiBXZSBiZWxpZXZlIHRoYXQgdGhpcyBtb3JlIGNvbnN0cmFpbmVkIHdheSB0byBzdHlsZSB0ZXh0IHdpbGwgeWllbGQgYmV0dGVyXG4gKiBhcHBzOlxuICpcbiAqIC0gKERldmVsb3BlcikgUmVhY3QgY29tcG9uZW50cyBhcmUgZGVzaWduZWQgd2l0aCBzdHJvbmcgaXNvbGF0aW9uIGluIG1pbmQ6XG4gKiBZb3Ugc2hvdWxkIGJlIGFibGUgdG8gZHJvcCBhIGNvbXBvbmVudCBhbnl3aGVyZSBpbiB5b3VyIGFwcGxpY2F0aW9uLFxuICogdHJ1c3RpbmcgdGhhdCBhcyBsb25nIGFzIHRoZSBwcm9wcyBhcmUgdGhlIHNhbWUsIGl0IHdpbGwgbG9vayBhbmQgYmVoYXZlIHRoZVxuICogc2FtZSB3YXkuIFRleHQgcHJvcGVydGllcyB0aGF0IGNvdWxkIGluaGVyaXQgZnJvbSBvdXRzaWRlIG9mIHRoZSBwcm9wcyB3b3VsZFxuICogYnJlYWsgdGhpcyBpc29sYXRpb24uXG4gKlxuICogLSAoSW1wbGVtZW50b3IpIFRoZSBpbXBsZW1lbnRhdGlvbiBvZiBSZWFjdCBOYXRpdmUgaXMgYWxzbyBzaW1wbGlmaWVkLiBXZSBkb1xuICogbm90IG5lZWQgdG8gaGF2ZSBhIGBmb250RmFtaWx5YCBmaWVsZCBvbiBldmVyeSBzaW5nbGUgZWxlbWVudCwgYW5kIHdlIGRvIG5vdFxuICogbmVlZCB0byBwb3RlbnRpYWxseSB0cmF2ZXJzZSB0aGUgdHJlZSB1cCB0byB0aGUgcm9vdCBldmVyeSB0aW1lIHdlIGRpc3BsYXkgYVxuICogdGV4dCBub2RlLiBUaGUgc3R5bGUgaW5oZXJpdGFuY2UgaXMgb25seSBlbmNvZGVkIGluc2lkZSBvZiB0aGUgbmF0aXZlIFRleHRcbiAqIGNvbXBvbmVudCBhbmQgZG9lc24ndCBsZWFrIHRvIG90aGVyIGNvbXBvbmVudHMgb3IgdGhlIHN5c3RlbSBpdHNlbGYuXG4gKlxuICovXG5cbi8vICRGbG93Rml4TWUoPj0wLjQxLjApXG5jb25zdCBUZXh0ID0gY3JlYXRlUmVhY3RDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiAnVGV4dCcsXG4gIHByb3BUeXBlczoge1xuICAgIC8qKlxuICAgICAqIFdoZW4gYG51bWJlck9mTGluZXNgIGlzIHNldCwgdGhpcyBwcm9wIGRlZmluZXMgaG93IHRleHQgd2lsbCBiZSB0cnVuY2F0ZWQuXG4gICAgICogYG51bWJlck9mTGluZXNgIG11c3QgYmUgc2V0IGluIGNvbmp1bmN0aW9uIHdpdGggdGhpcyBwcm9wLlxuICAgICAqXG4gICAgICogVGhpcyBjYW4gYmUgb25lIG9mIHRoZSBmb2xsb3dpbmcgdmFsdWVzOlxuICAgICAqXG4gICAgICogLSBgaGVhZGAgLSBUaGUgbGluZSBpcyBkaXNwbGF5ZWQgc28gdGhhdCB0aGUgZW5kIGZpdHMgaW4gdGhlIGNvbnRhaW5lciBhbmQgdGhlIG1pc3NpbmcgdGV4dFxuICAgICAqIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGxpbmUgaXMgaW5kaWNhdGVkIGJ5IGFuIGVsbGlwc2lzIGdseXBoLiBlLmcuLCBcIi4uLnd4eXpcIlxuICAgICAqIC0gYG1pZGRsZWAgLSBUaGUgbGluZSBpcyBkaXNwbGF5ZWQgc28gdGhhdCB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgZml0IGluIHRoZSBjb250YWluZXIgYW5kIHRoZVxuICAgICAqIG1pc3NpbmcgdGV4dCBpbiB0aGUgbWlkZGxlIGlzIGluZGljYXRlZCBieSBhbiBlbGxpcHNpcyBnbHlwaC4gXCJhYi4uLnl6XCJcbiAgICAgKiAtIGB0YWlsYCAtIFRoZSBsaW5lIGlzIGRpc3BsYXllZCBzbyB0aGF0IHRoZSBiZWdpbm5pbmcgZml0cyBpbiB0aGUgY29udGFpbmVyIGFuZCB0aGVcbiAgICAgKiBtaXNzaW5nIHRleHQgYXQgdGhlIGVuZCBvZiB0aGUgbGluZSBpcyBpbmRpY2F0ZWQgYnkgYW4gZWxsaXBzaXMgZ2x5cGguIGUuZy4sIFwiYWJjZC4uLlwiXG4gICAgICogLSBgY2xpcGAgLSBMaW5lcyBhcmUgbm90IGRyYXduIHBhc3QgdGhlIGVkZ2Ugb2YgdGhlIHRleHQgY29udGFpbmVyLlxuICAgICAqXG4gICAgICogVGhlIGRlZmF1bHQgaXMgYHRhaWxgLlxuICAgICAqXG4gICAgICogPiBgY2xpcGAgaXMgd29ya2luZyBvbmx5IGZvciBpT1NcbiAgICAgKi9cbiAgICBlbGxpcHNpemVNb2RlOiBQcm9wVHlwZXMub25lT2YoWydoZWFkJywgJ21pZGRsZScsICd0YWlsJywgJ2NsaXAnXSksXG4gICAgLyoqXG4gICAgICogVXNlZCB0byB0cnVuY2F0ZSB0aGUgdGV4dCB3aXRoIGFuIGVsbGlwc2lzIGFmdGVyIGNvbXB1dGluZyB0aGUgdGV4dFxuICAgICAqIGxheW91dCwgaW5jbHVkaW5nIGxpbmUgd3JhcHBpbmcsIHN1Y2ggdGhhdCB0aGUgdG90YWwgbnVtYmVyIG9mIGxpbmVzXG4gICAgICogZG9lcyBub3QgZXhjZWVkIHRoaXMgbnVtYmVyLlxuICAgICAqXG4gICAgICogVGhpcyBwcm9wIGlzIGNvbW1vbmx5IHVzZWQgd2l0aCBgZWxsaXBzaXplTW9kZWAuXG4gICAgICovXG4gICAgbnVtYmVyT2ZMaW5lczogUHJvcFR5cGVzLm51bWJlcixcbiAgICAvKipcbiAgICAgKiBTZXQgdGV4dCBicmVhayBzdHJhdGVneSBvbiBBbmRyb2lkIEFQSSBMZXZlbCAyMyssIHBvc3NpYmxlIHZhbHVlcyBhcmUgYHNpbXBsZWAsIGBoaWdoUXVhbGl0eWAsIGBiYWxhbmNlZGBcbiAgICAgKiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgaGlnaFF1YWxpdHlgLlxuICAgICAqIEBwbGF0Zm9ybSBhbmRyb2lkXG4gICAgICovXG4gICAgdGV4dEJyZWFrU3RyYXRlZ3k6IFByb3BUeXBlcy5vbmVPZihbJ3NpbXBsZScsICdoaWdoUXVhbGl0eScsICdiYWxhbmNlZCddKSxcbiAgICAvKipcbiAgICAgKiBJbnZva2VkIG9uIG1vdW50IGFuZCBsYXlvdXQgY2hhbmdlcyB3aXRoXG4gICAgICpcbiAgICAgKiAgIGB7bmF0aXZlRXZlbnQ6IHtsYXlvdXQ6IHt4LCB5LCB3aWR0aCwgaGVpZ2h0fX19YFxuICAgICAqL1xuICAgIG9uTGF5b3V0OiBQcm9wVHlwZXMuZnVuYyxcbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBwcmVzcy5cbiAgICAgKlxuICAgICAqIGUuZy4sIGBvblByZXNzPXsoKSA9PiBjb25zb2xlLmxvZygnMXN0Jyl9YFxuICAgICAqL1xuICAgIG9uUHJlc3M6IFByb3BUeXBlcy5mdW5jLFxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIG9uIGxvbmcgcHJlc3MuXG4gICAgICpcbiAgICAgKiBlLmcuLCBgb25Mb25nUHJlc3M9e3RoaXMuaW5jcmVhc2VTaXplfT5gXG4gICAgICovXG4gICAgb25Mb25nUHJlc3M6IFByb3BUeXBlcy5mdW5jLFxuICAgIC8qKlxuICAgICAqIFdoZW4gdGhlIHNjcm9sbCB2aWV3IGlzIGRpc2FibGVkLCB0aGlzIGRlZmluZXMgaG93IGZhciB5b3VyIHRvdWNoIG1heVxuICAgICAqIG1vdmUgb2ZmIG9mIHRoZSBidXR0b24sIGJlZm9yZSBkZWFjdGl2YXRpbmcgdGhlIGJ1dHRvbi4gT25jZSBkZWFjdGl2YXRlZCxcbiAgICAgKiB0cnkgbW92aW5nIGl0IGJhY2sgYW5kIHlvdSdsbCBzZWUgdGhhdCB0aGUgYnV0dG9uIGlzIG9uY2UgYWdhaW5cbiAgICAgKiByZWFjdGl2YXRlZCEgTW92ZSBpdCBiYWNrIGFuZCBmb3J0aCBzZXZlcmFsIHRpbWVzIHdoaWxlIHRoZSBzY3JvbGwgdmlld1xuICAgICAqIGlzIGRpc2FibGVkLiBFbnN1cmUgeW91IHBhc3MgaW4gYSBjb25zdGFudCB0byByZWR1Y2UgbWVtb3J5IGFsbG9jYXRpb25zLlxuICAgICAqL1xuICAgIHByZXNzUmV0ZW50aW9uT2Zmc2V0OiBFZGdlSW5zZXRzUHJvcFR5cGUsXG4gICAgLyoqXG4gICAgICogTGV0cyB0aGUgdXNlciBzZWxlY3QgdGV4dCwgdG8gdXNlIHRoZSBuYXRpdmUgY29weSBhbmQgcGFzdGUgZnVuY3Rpb25hbGl0eS5cbiAgICAgKi9cbiAgICBzZWxlY3RhYmxlOiBQcm9wVHlwZXMuYm9vbCxcbiAgICAvKipcbiAgICAgKiBUaGUgaGlnaGxpZ2h0IGNvbG9yIG9mIHRoZSB0ZXh0LlxuICAgICAqIEBwbGF0Zm9ybSBhbmRyb2lkXG4gICAgICovXG4gICAgc2VsZWN0aW9uQ29sb3I6IENvbG9yUHJvcFR5cGUsXG4gICAgLyoqXG4gICAgICogV2hlbiBgdHJ1ZWAsIG5vIHZpc3VhbCBjaGFuZ2UgaXMgbWFkZSB3aGVuIHRleHQgaXMgcHJlc3NlZCBkb3duLiBCeVxuICAgICAqIGRlZmF1bHQsIGEgZ3JheSBvdmFsIGhpZ2hsaWdodHMgdGhlIHRleHQgb24gcHJlc3MgZG93bi5cbiAgICAgKiBAcGxhdGZvcm0gaW9zXG4gICAgICovXG4gICAgc3VwcHJlc3NIaWdobGlnaHRpbmc6IFByb3BUeXBlcy5ib29sLFxuICAgIHN0eWxlOiBzdHlsZVByb3BUeXBlLFxuICAgIC8qKlxuICAgICAqIFVzZWQgdG8gbG9jYXRlIHRoaXMgdmlldyBpbiBlbmQtdG8tZW5kIHRlc3RzLlxuICAgICAqL1xuICAgIHRlc3RJRDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIGxvY2F0ZSB0aGlzIHZpZXcgZnJvbSBuYXRpdmUgY29kZS5cbiAgICAgKi9cbiAgICBuYXRpdmVJRDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgd2hldGhlciBmb250cyBzaG91bGQgc2NhbGUgdG8gcmVzcGVjdCBUZXh0IFNpemUgYWNjZXNzaWJpbGl0eSBzZXR0aW5ncy4gVGhlXG4gICAgICogZGVmYXVsdCBpcyBgdHJ1ZWAuXG4gICAgICovXG4gICAgYWxsb3dGb250U2NhbGluZzogUHJvcFR5cGVzLmJvb2wsXG4gICAgLyoqXG4gICAgICogV2hlbiBzZXQgdG8gYHRydWVgLCBpbmRpY2F0ZXMgdGhhdCB0aGUgdmlldyBpcyBhbiBhY2Nlc3NpYmlsaXR5IGVsZW1lbnQuIFRoZSBkZWZhdWx0IHZhbHVlXG4gICAgICogZm9yIGEgYFRleHRgIGVsZW1lbnQgaXMgYHRydWVgLlxuICAgICAqXG4gICAgICogU2VlIHRoZVxuICAgICAqIFtBY2Nlc3NpYmlsaXR5IGd1aWRlXShkb2NzL2FjY2Vzc2liaWxpdHkuaHRtbCNhY2Nlc3NpYmxlLWlvcy1hbmRyb2lkKVxuICAgICAqIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgICAqL1xuICAgIGFjY2Vzc2libGU6IFByb3BUeXBlcy5ib29sLFxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIGZvbnQgc2hvdWxkIGJlIHNjYWxlZCBkb3duIGF1dG9tYXRpY2FsbHkgdG8gZml0IGdpdmVuIHN0eWxlIGNvbnN0cmFpbnRzLlxuICAgICAqIEBwbGF0Zm9ybSBpb3NcbiAgICAgKi9cbiAgICBhZGp1c3RzRm9udFNpemVUb0ZpdDogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgc21hbGxlc3QgcG9zc2libGUgc2NhbGUgYSBmb250IGNhbiByZWFjaCB3aGVuIGFkanVzdHNGb250U2l6ZVRvRml0IGlzIGVuYWJsZWQuICh2YWx1ZXMgMC4wMS0xLjApLlxuICAgICAqIEBwbGF0Zm9ybSBpb3NcbiAgICAgKi9cbiAgICBtaW5pbXVtRm9udFNjYWxlOiBQcm9wVHlwZXMubnVtYmVyLFxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgZGlzYWJsZWQgc3RhdGUgb2YgdGhlIHRleHQgdmlldyBmb3IgdGVzdGluZyBwdXJwb3Nlc1xuICAgICAqIEBwbGF0Zm9ybSBhbmRyb2lkXG4gICAgICovXG4gICAgZGlzYWJsZWQ6IFByb3BUeXBlcy5ib29sLFxuICB9LFxuICBnZXREZWZhdWx0UHJvcHMoKTogT2JqZWN0IHtcbiAgICByZXR1cm4ge1xuICAgICAgYWNjZXNzaWJsZTogdHJ1ZSxcbiAgICAgIGFsbG93Rm9udFNjYWxpbmc6IHRydWUsXG4gICAgICBlbGxpcHNpemVNb2RlOiAndGFpbCcsXG4gICAgfTtcbiAgfSxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpOiBPYmplY3Qge1xuICAgIHJldHVybiBtZXJnZUZhc3QoVG91Y2hhYmxlLk1peGluLnRvdWNoYWJsZUdldEluaXRpYWxTdGF0ZSgpLCB7XG4gICAgICBpc0hpZ2hsaWdodGVkOiBmYWxzZSxcbiAgICB9KTtcbiAgfSxcbiAgbWl4aW5zOiBbTmF0aXZlTWV0aG9kc01peGluXSxcbiAgdmlld0NvbmZpZzogdmlld0NvbmZpZyxcbiAgZ2V0Q2hpbGRDb250ZXh0KCk6IE9iamVjdCB7XG4gICAgcmV0dXJuIHtpc0luQVBhcmVudFRleHQ6IHRydWV9O1xuICB9LFxuICBjaGlsZENvbnRleHRUeXBlczoge1xuICAgIGlzSW5BUGFyZW50VGV4dDogUHJvcFR5cGVzLmJvb2xcbiAgfSxcbiAgY29udGV4dFR5cGVzOiB7XG4gICAgaXNJbkFQYXJlbnRUZXh0OiBQcm9wVHlwZXMuYm9vbFxuICB9LFxuICAvKipcbiAgICogT25seSBhc3NpZ25lZCBpZiB0b3VjaCBpcyBuZWVkZWQuXG4gICAqL1xuICBfaGFuZGxlcnM6IChudWxsOiA/T2JqZWN0KSxcbiAgX2hhc1ByZXNzSGFuZGxlcigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISF0aGlzLnByb3BzLm9uUHJlc3MgfHwgISF0aGlzLnByb3BzLm9uTG9uZ1ByZXNzO1xuICB9LFxuICAvKipcbiAgICogVGhlc2UgYXJlIGFzc2lnbmVkIGxhemlseSB0aGUgZmlyc3QgdGltZSB0aGUgcmVzcG9uZGVyIGlzIHNldCB0byBtYWtlIHBsYWluXG4gICAqIHRleHQgbm9kZXMgYXMgY2hlYXAgYXMgcG9zc2libGUuXG4gICAqL1xuICB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luOiAobnVsbDogP0Z1bmN0aW9uKSxcbiAgdG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQ6IChudWxsOiA/RnVuY3Rpb24pLFxuICB0b3VjaGFibGVIYW5kbGVQcmVzczogKG51bGw6ID9GdW5jdGlvbiksXG4gIHRvdWNoYWJsZUhhbmRsZUxvbmdQcmVzczogKG51bGw6ID9GdW5jdGlvbiksXG4gIHRvdWNoYWJsZUdldFByZXNzUmVjdE9mZnNldDogKG51bGw6ID9GdW5jdGlvbiksXG4gIHJlbmRlcigpOiBSZWFjdC5FbGVtZW50PGFueT4ge1xuICAgIGxldCBuZXdQcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgaWYgKHRoaXMucHJvcHMub25TdGFydFNob3VsZFNldFJlc3BvbmRlciB8fCB0aGlzLl9oYXNQcmVzc0hhbmRsZXIoKSkge1xuICAgICAgaWYgKCF0aGlzLl9oYW5kbGVycykge1xuICAgICAgICB0aGlzLl9oYW5kbGVycyA9IHtcbiAgICAgICAgICBvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyOiAoKTogYm9vbCA9PiB7XG4gICAgICAgICAgICBjb25zdCBzaG91bGRTZXRGcm9tUHJvcHMgPSB0aGlzLnByb3BzLm9uU3RhcnRTaG91bGRTZXRSZXNwb25kZXIgJiZcbiAgICAgICAgICAgICAgICAvLyAkRmxvd0ZpeE1lKD49MC40MS4wKVxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25TdGFydFNob3VsZFNldFJlc3BvbmRlcigpO1xuICAgICAgICAgICAgY29uc3Qgc2V0UmVzcG9uZGVyID0gc2hvdWxkU2V0RnJvbVByb3BzIHx8IHRoaXMuX2hhc1ByZXNzSGFuZGxlcigpO1xuICAgICAgICAgICAgaWYgKHNldFJlc3BvbmRlciAmJiAhdGhpcy50b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luKSB7XG4gICAgICAgICAgICAgIC8vIEF0dGFjaCBhbmQgYmluZCBhbGwgdGhlIG90aGVyIGhhbmRsZXJzIG9ubHkgdGhlIGZpcnN0IHRpbWUgYSB0b3VjaFxuICAgICAgICAgICAgICAvLyBhY3R1YWxseSBoYXBwZW5zLlxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBUb3VjaGFibGUuTWl4aW4pIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIFRvdWNoYWJsZS5NaXhpbltrZXldID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAodGhpczogYW55KVtrZXldID0gVG91Y2hhYmxlLk1peGluW2tleV0uYmluZCh0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdGhpcy50b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLnN1cHByZXNzSGlnaGxpZ2h0aW5nIHx8ICF0aGlzLl9oYXNQcmVzc0hhbmRsZXIoKSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgIGlzSGlnaGxpZ2h0ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgdGhpcy50b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc091dCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5zdXBwcmVzc0hpZ2hsaWdodGluZyB8fCAhdGhpcy5faGFzUHJlc3NIYW5kbGVyKCkpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICBpc0hpZ2hsaWdodGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICB0aGlzLnRvdWNoYWJsZUhhbmRsZVByZXNzID0gKGU6IFN5bnRoZXRpY0V2ZW50PD4pID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uUHJlc3MgJiYgdGhpcy5wcm9wcy5vblByZXNzKGUpO1xuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzID0gKGU6IFN5bnRoZXRpY0V2ZW50PD4pID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uTG9uZ1ByZXNzICYmIHRoaXMucHJvcHMub25Mb25nUHJlc3MoZSk7XG4gICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgdGhpcy50b3VjaGFibGVHZXRQcmVzc1JlY3RPZmZzZXQgPSBmdW5jdGlvbigpOiBSZWN0T2Zmc2V0IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5wcmVzc1JldGVudGlvbk9mZnNldCB8fCBQUkVTU19SRUNUX09GRlNFVDtcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vICRGbG93Rml4TWUoPj0wLjQxLjApXG4gICAgICAgICAgICByZXR1cm4gc2V0UmVzcG9uZGVyO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb25SZXNwb25kZXJHcmFudDogZnVuY3Rpb24oZTogU3ludGhldGljRXZlbnQ8PiwgZGlzcGF0Y2hJRDogc3RyaW5nKSB7XG4gICAgICAgICAgICAvLyAkRmxvd0ZpeE1lKD49MC40MS4wKVxuICAgICAgICAgICAgdGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJHcmFudChlLCBkaXNwYXRjaElEKTtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25SZXNwb25kZXJHcmFudCAmJlxuICAgICAgICAgICAgICAvLyAkRmxvd0ZpeE1lKD49MC40MS4wKVxuICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uUmVzcG9uZGVyR3JhbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICB9LmJpbmQodGhpcyksXG4gICAgICAgICAgb25SZXNwb25kZXJNb3ZlOiBmdW5jdGlvbihlOiBTeW50aGV0aWNFdmVudDw+KSB7XG4gICAgICAgICAgICAvLyAkRmxvd0ZpeE1lKD49MC40MS4wKVxuICAgICAgICAgICAgdGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJNb3ZlKGUpO1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vblJlc3BvbmRlck1vdmUgJiZcbiAgICAgICAgICAgICAgLy8gJEZsb3dGaXhNZSg+PTAuNDEuMClcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vblJlc3BvbmRlck1vdmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICB9LmJpbmQodGhpcyksXG4gICAgICAgICAgb25SZXNwb25kZXJSZWxlYXNlOiBmdW5jdGlvbihlOiBTeW50aGV0aWNFdmVudDw+KSB7XG4gICAgICAgICAgICAvLyAkRmxvd0ZpeE1lKD49MC40MS4wKVxuICAgICAgICAgICAgdGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJSZWxlYXNlKGUpO1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vblJlc3BvbmRlclJlbGVhc2UgJiZcbiAgICAgICAgICAgICAgLy8gJEZsb3dGaXhNZSg+PTAuNDEuMClcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vblJlc3BvbmRlclJlbGVhc2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICB9LmJpbmQodGhpcyksXG4gICAgICAgICAgb25SZXNwb25kZXJUZXJtaW5hdGU6IGZ1bmN0aW9uKGU6IFN5bnRoZXRpY0V2ZW50PD4pIHtcbiAgICAgICAgICAgIC8vICRGbG93Rml4TWUoPj0wLjQxLjApXG4gICAgICAgICAgICB0aGlzLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0ZShlKTtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25SZXNwb25kZXJUZXJtaW5hdGUgJiZcbiAgICAgICAgICAgICAgLy8gJEZsb3dGaXhNZSg+PTAuNDEuMClcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vblJlc3BvbmRlclRlcm1pbmF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgIH0uYmluZCh0aGlzKSxcbiAgICAgICAgICBvblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdDogZnVuY3Rpb24oKTogYm9vbCB7XG4gICAgICAgICAgICAvLyBBbGxvdyB0b3VjaGFibGUgb3IgcHJvcHMub25SZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3QgdG8gZGVueVxuICAgICAgICAgICAgLy8gdGhlIHJlcXVlc3RcbiAgICAgICAgICAgIC8vICRGbG93Rml4TWUoPj0wLjQxLjApXG4gICAgICAgICAgICB2YXIgYWxsb3dUZXJtaW5hdGlvbiA9IHRoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0KCk7XG4gICAgICAgICAgICBpZiAoYWxsb3dUZXJtaW5hdGlvbiAmJiB0aGlzLnByb3BzLm9uUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0KSB7XG4gICAgICAgICAgICAgIC8vICRGbG93Rml4TWUoPj0wLjQxLjApXG4gICAgICAgICAgICAgIGFsbG93VGVybWluYXRpb24gPSB0aGlzLnByb3BzLm9uUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYWxsb3dUZXJtaW5hdGlvbjtcbiAgICAgICAgICB9LmJpbmQodGhpcyksXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBuZXdQcm9wcyA9IHtcbiAgICAgICAgLi4udGhpcy5wcm9wcyxcbiAgICAgICAgLi4udGhpcy5faGFuZGxlcnMsXG4gICAgICAgIGlzSGlnaGxpZ2h0ZWQ6IHRoaXMuc3RhdGUuaXNIaWdobGlnaHRlZCxcbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChuZXdQcm9wcy5zZWxlY3Rpb25Db2xvciAhPSBudWxsKSB7XG4gICAgICBuZXdQcm9wcyA9IHtcbiAgICAgICAgLi4ubmV3UHJvcHMsXG4gICAgICAgIHNlbGVjdGlvbkNvbG9yOiBwcm9jZXNzQ29sb3IobmV3UHJvcHMuc2VsZWN0aW9uQ29sb3IpXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoVG91Y2hhYmxlLlRPVUNIX1RBUkdFVF9ERUJVRyAmJiBuZXdQcm9wcy5vblByZXNzKSB7XG4gICAgICBuZXdQcm9wcyA9IHtcbiAgICAgICAgLi4ubmV3UHJvcHMsXG4gICAgICAgIHN0eWxlOiBbdGhpcy5wcm9wcy5zdHlsZSwge2NvbG9yOiAnbWFnZW50YSd9XSxcbiAgICAgIH07XG4gICAgfVxuICAgIGlmICh0aGlzLmNvbnRleHQuaXNJbkFQYXJlbnRUZXh0KSB7XG4gICAgICByZXR1cm4gPFJDVFZpcnR1YWxUZXh0IHsuLi5uZXdQcm9wc30gLz47XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiA8UkNUVGV4dCB7Li4ubmV3UHJvcHN9IC8+O1xuICAgIH1cbiAgfSxcbn0pO1xuXG50eXBlIFJlY3RPZmZzZXQgPSB7XG4gIHRvcDogbnVtYmVyLFxuICBsZWZ0OiBudW1iZXIsXG4gIHJpZ2h0OiBudW1iZXIsXG4gIGJvdHRvbTogbnVtYmVyLFxufVxuXG52YXIgUFJFU1NfUkVDVF9PRkZTRVQgPSB7dG9wOiAyMCwgbGVmdDogMjAsIHJpZ2h0OiAyMCwgYm90dG9tOiAzMH07XG5cbnZhciBSQ1RUZXh0ID0gY3JlYXRlUmVhY3ROYXRpdmVDb21wb25lbnRDbGFzcyhcbiAgdmlld0NvbmZpZy51aVZpZXdDbGFzc05hbWUsXG4gICgpID0+IHZpZXdDb25maWdcbik7XG52YXIgUkNUVmlydHVhbFRleHQgPSBSQ1RUZXh0O1xuXG5pZiAoUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJykge1xuICBSQ1RWaXJ0dWFsVGV4dCA9IGNyZWF0ZVJlYWN0TmF0aXZlQ29tcG9uZW50Q2xhc3MoJ1JDVFZpcnR1YWxUZXh0JywgKCkgPT4gKHtcbiAgICB2YWxpZEF0dHJpYnV0ZXM6IG1lcmdlRmFzdChSZWFjdE5hdGl2ZVZpZXdBdHRyaWJ1dGVzLlVJVmlldywge1xuICAgICAgaXNIaWdobGlnaHRlZDogdHJ1ZSxcbiAgICB9KSxcbiAgICB1aVZpZXdDbGFzc05hbWU6ICdSQ1RWaXJ0dWFsVGV4dCcsXG4gIH0pKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBUZXh0O1xuIl19